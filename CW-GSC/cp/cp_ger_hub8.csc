/***********************************************
 * Decompiled by Ate47 and Edited by SyndiShanX
 * Script: cp\cp_ger_hub8.csc
***********************************************/

#using script_3defbd925a406475;
#using script_428e626ff3926036;
#using scripts\autogenerated\luielems\cp\full_screen_movie;
#using scripts\core_common\clientfield_shared;
#using scripts\core_common\load_shared;
#using scripts\core_common\lui_shared;
#using scripts\core_common\postfx_shared;
#using scripts\core_common\util_shared;
#namespace cp_ger_hub8;

function event_handler[level_init] main(eventstruct) {
  full_screen_movie::register();
  namespace_fa9f53a2::main();
  clientfield::register("world", "prop_wash", 1, 1, "int", &function_766abe10, 0, 0);
  clientfield::register("toplayer", "clf_pstfx_burn_safehouse", 1, 1, "int", &function_3a7543ef, 0, 0);
  load::main();
  util::waitforclient(0);
  forcestreamxmodel("p9_sr_evidence_perseus_bloody_dossier_01_anim");
}

function function_766abe10(localclientnum, oldval, newval, bnewent, binitialsnap, fieldname, bwastimejump) {
  ents = getdynentarray("prop_blast_me");

  for(i = 0; i < 20; i++) {
    foreach(ent in ents) {
      launchdynent(ent, (-0.15, 0, 0));
    }

    waitframe(1);
    waitframe(1);
  }
}

function private function_3a7543ef(localclientnum, oldval, newval, bnewent, binitialsnap, fieldname, bwastimejump) {
  if(self postfx::function_556665f2("pstfx_burn_safehouse")) {
    self postfx::stoppostfxbundle("pstfx_burn_safehouse");
  }

  self postfx::playpostfxbundle("pstfx_burn_safehouse");
}